<mat-sidenav-container
  class="sidenav-container"
  hasBackdrop="true">

  <mat-sidenav
    #sidenav
    class="sidenav"
    mode="over">
    <mat-toolbar>
      <button
        (click)="sidenav.toggle()"
        mat-button
        mat-icon-button
        class="menu-btn">
        <mat-icon>close</mat-icon>
      </button>
      <img
        class="logo"
        src="/assets/img/logo.png"
        alt="Smartschool">
    </mat-toolbar>
    <mat-nav-list (click)="sidenav.toggle()">
      <a mat-list-item routerLink="admin/users">
        <mat-icon>supervised_user_circle</mat-icon>
        <span class="menu-item-text">Users</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar class="header">
      <button
        *ngIf="authService.isLoggedIn"
        (click)="sidenav.toggle()"
        class="menu-btn"
        mat-button
        mat-icon-button>
        <mat-icon>menu</mat-icon>
      </button>

      <img *ngIf="!(isXSmall$ | async)"
           class="logo"
           src="/assets/img/logo.png"
           alt="Smartschool">

      <span class="space"></span>

      <button [matMenuTriggerFor]="langMenu" class="language-btn" mat-button mat-icon-button>
        <img [src]="'assets/img/' + currentLang + '.png'"
             [alt]="currentLang"
             class="language-icon">
      </button>

      <mat-menu #langMenu="matMenu">
        <button *ngFor="let lang of languages"
                (click)="switchLang(lang)"
                mat-menu-item>
          <img [src]="'assets/img/' + lang + '.png'" [alt]=lang class="language-icon">
        </button>
      </mat-menu>

      <button *ngIf="!authService.isLoggedIn"
              (click)="signIn()"
              mat-raised-button
              color="primary">
        {{'NAV-BAR.SIGN-IN' | translate}}
      </button>

      <span *ngIf="authService.isLoggedIn">
        <button
          [matMenuTriggerFor]="userInfo"
          mat-button
          mat-icon-button
          class="user-btn">
          <img [src]="this.avatarService.getUrlByAvatarName(this.authService.userPrinciple.avatarName)" alt="avatar">
        </button>

        <mat-menu #userInfo="matMenu">
          <div class="user-info-container">
            <div class="avatar">
              <img [src]="this.avatarService.getUrlByAvatarName(this.authService.userPrinciple.avatarName)"
                   alt="avatar">
            </div>
            <div class="info">
              {{this.authService.userPrinciple.firstName}} {{this.authService.userPrinciple.secondName}}
              <p>{{this.authService.userPrinciple.sub}}</p>
            </div>
            <button mat-raised-button
                    class="btn"
                    color="primary">
              {{'NAV-BAR.EDIT-PROFILE' | translate}}
            </button>
            <button (click)="signOut()"
                    mat-raised-button
                    class="btn"
                    color="warn">
              {{'NAV-BAR.SIGN-OUT' | translate}}
            </button>
          </div>
        </mat-menu>
      </span>
    </mat-toolbar>
    <div class="content">
      <ng-content></ng-content>
    </div>
  </mat-sidenav-content>

</mat-sidenav-container>




